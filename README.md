# 人脸签到系统（Face Sign-in System）

基于深度学习的人脸识别课堂签到工具，支持中文显示、防重复签到，并自动生成未签到名单。

---

## 🌟 基础功能

- 👤 **人脸识别签到**：自动识别已注册学生并记录签到状态  
- 🚫 **防重复签到**：同一学生仅记录一次，避免刷签  
- 🇨🇳 **完整中文支持**：姓名、提示弹窗均使用中文字体（黑体/微软雅黑）  
- 📋 **签到结果导出**：程序退出后自动生成文本文件，包含：
  - ✅ 已签到学生名单  
  - ❌ **未签到学生名单**（对比 `dataset/` 中所有注册学生）
- ⚙️ **模块化设计**：主程序、数据库构建、工具函数分离，便于维护

---

## 📂 项目结构
```
face-signin/
├── dataset/                 # 【需手动准备】原始人脸图像（按姓名建子文件夹）
├── embeddings/              # 自动生成的人脸特征数据库
│   └── database.npz
├── utils/
│   └── face_utils.py        # MTCNN + ResNet 模型加载与人脸嵌入提取
├── build_database.py        # 构建人脸特征数据库
├── signin_app.py            # 主签到程序
├── requirements.txt         # Python 依赖包列表
├── .gitignore               # Git 忽略规则
└── README.md                # 本说明文件
```

---

## 🚀 快速开始

 ### 1. 安装依赖

```bash
pip install -r requirements.txt
```

 ### 2. 准备人脸数据集

在项目根目录创建 dataset/ 文件夹，按学生姓名建立子文件夹，每个子文件夹放入该学生 3~5 张清晰正面照：
```
dataset/
├── 张三/
│   ├── 001.jpg
│   ├── 002.jpg
│   └── 003.jpg
├── 李四/
│   ├── img1.png
│   └── img2.png
└── 王五/
    └── photo.jpg
```

要求：
- 图像格式：`.jpg`, `.jpeg`, `.png`
- 正脸、无遮挡、光照均匀

 ### 3. 构建人脸特征数据库

```bash
python build_database.py
```

成功后将自动生成 embeddings/database.npz 文件。


⚠️ 若提示“找不到 dataset/”，请检查路径是否正确

 ### 4. 启动签到系统

```bash
python signin_app.py
```

- 摄像头画面实时检测人脸
- 识别成功且未签到 → 弹出绿色提示：“张三同学签到成功！”（1秒）
- 未知人脸 → 显示红色“Unknown”
- 按键盘 `q` 键退出程序

 ### 5. 查看签到结果

程序退出后，自动生成带时间戳的签到记录文件，例如：

`signin_record_20251227_143022.txt`

内容示例：
```
课堂人脸签到记录
==============================
李四
张三

未签到的学生:
==============================
王五
赵六
```

## ⚙️ 技术依赖

详见 [`requirements.txt`](requirements.txt)

## ⚠️ 注意事项

- 首次运行前必须：
  - 准备好 `dataset/`
  - 运行 `build_database.py`
- 若提示 “❌ 没有找到数据库！...”，说明 `embeddings/database.npz` 不存在
- 中文字体依赖系统字体（Windows 默认支持 `simhei.ttf` / `msyh.ttc`）
- 本项目不上传人脸图像和特征数据库，符合隐私保护原则
- 如需支持更多中文系统，请在 get_chinese_font() 中扩展字体路径

## 📅 最后更新
- 2025年12月